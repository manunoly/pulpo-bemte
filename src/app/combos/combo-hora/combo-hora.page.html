<ion-content>

  <div style="padding-top: 20%">
  </div>
  <ion-grid *ngIf="!confirmar">
    <h3 *ngIf="combo" padding text-center>
      {{ combo }}
    </h3>
    <ion-row>
      <ion-col>
        <ion-list *ngIf="horas | async as horaD; else loadD" style="background: transparent">
          <ion-radio-group [(ngModel)]="horaSeleccionada">
            <ion-item *ngFor="let hora of horaD">
              <ion-label>{{hora.hora}} Horas</ion-label>
              <ion-radio slot="start" [value]="hora"></ion-radio>
              <div slot="end" text-center>
                {{hora.inversion}}<br>
                <small><del> Antes {{hora.descuento}} </del></small>
              </div>
            </ion-item>
          </ion-radio-group>
        </ion-list>
      </ion-col>
    </ion-row>
    <ng-template #loadD>
      <div text-center>
        <ion-spinner></ion-spinner>
        <h3>Espere por favor</h3>
      </div>
    </ng-template>
    <ion-row>
      <ion-col size="4" offset="1">
        <ion-button (click)="atras()" size="block">Atras</ion-button>
      </ion-col>
      <ion-col size="4" offset="1">
        <ion-button [disabled]="!horaSeleccionada" (click)="confirmar = true" size="block">Confirmar
        </ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- paso confirmar -->
  <ion-grid *ngIf="confirmar" text-center>
    <h3 text-center *ngIf="auth.currentUser | async as user" padding style="padding-top: 20%">
      {{ user?.nombres }} {{ user?.apellidos }}<br>
      Has escogido el combo
    </h3>
    <div *ngIf="!pagarCombo">
      <h3 *ngIf="combo" padding>
        {{ combo }}
      </h3>
      <ion-list style="background: transparent">
        <ion-item class="ion-padding-horizontal">
          <ion-label>
            Precio Promocion:
          </ion-label>
          <div slot="end">
            $ {{horaSeleccionada?.inversion}}
          </div>
        </ion-item>
        <ion-item class="ion-padding-horizontal">
          <ion-label>
            Combo:
          </ion-label>
          <div slot="end">
            {{horaSeleccionada?.hora}} Horas
          </div>
        </ion-item>
      </ion-list>

      <ion-row>
        <ion-col size="4" offset="1">
          <ion-button size="block" (click)="confirmar = false">Atras</ion-button>
        </ion-col>
        <ion-col size="4" offset="1">
          <ion-button [disabled]="!horaSeleccionada" (click)="confirmarHora()" size="block">Confirmar
          </ion-button>
        </ion-col>
      </ion-row>
    </div>
    <div *ngIf="pagarCombo">
      <ion-row>
        <ion-col text-center>
          <h5 padding small>Proceda a realizar el pago</h5>
          <h5>Tiene 20 min. <br>
            CC: 22xxx00982 BEMTE</h5>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="6" offset="3">
          <ion-button size="block" (click)="upload.selectImage()">Adjuntar archivo</ion-button>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="4" offset="1">
          <ion-button shape="round" expand="block" size="small" (click)="atras()">ATRAS</ion-button>
        </ion-col>
        <ion-col size="4" offset="1">
          <ion-button shape="round" expand="block" size="small" (click)="pagarComboConTransferencia()">
            ACEPTAR
          </ion-button>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>